{% extends 'layout/_layout.html' %}

{% block css %}
{% endblock %}

{% block title %}
    <ol class="breadcrumb" style="margin-bottom: 0;padding-left: 0px">
        <li><a href="/index.html">首页</a></li>
        <li><a href="#">资产管理</a></li>
        <li><a href="/cmdb.html">资产查询</a></li>
        <li class="active">资产添加</li>
    </ol>
    <h1 class="page-header text-overflow">资产添加</h1>
{% endblock %}

{% block conent %}
    <div class="row">
        {{ obj_form.errors }}
        <form class="form-horizontal" method="post">{% csrf_token %}
        {% for field in obj_form %}
            <div class="form-group">
                <label class="col-sm-2" style="font-weight: normal">
                    {% if field.field.required %}
                        <b>{{ field.label }}</b>
                    {% else %}
                        {{ field.label }}
                    {% endif %}
                </label>
                <div class="col-sm-10">
                    <span style="color: red">{{ field.errors }}</span>
                    {% if field.name in admin_obj.filter_horizontal %}
                        {% get_m2m_chosen_objs admin_obj field.name obj_form.instance as m2m_chosen_objs %}
                        <div class="col-lg-6">
                            {% get_m2m_avaliable_objs admin_obj field.name as m2m_avaliable_objs %}
                            <input type="text" oninput="FuzzSearch(this, 'id_{{ field.name }}_from')" class="form-control">


                            <select multiple field_name="{{ field.name }}" class="form-control" id="id_{{ field.name }}_from">
                                {% for obj in m2m_avaliable_objs %}
                                    {% if obj not in m2m_chosen_objs %}
                                        <option value="{{ obj.id }}" ondblclick="MoveEleTo(this, 'id_{{ field.name }}_to')">{{ obj }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>

                        </div>
                        <div class="col-lg-6">
                            {% get_m2m_chosen_objs admin_obj field.name obj_form.instance as m2m_chosen_objs %}
                            <select m2m_right="yes" name="{{ field.name }}" multiple field_name="{{ field.name }}" class="form-control" id="id_{{ field.name }}_to">
                                {% for obj in m2m_chosen_objs %}
                                    <option value="{{ obj.id }}" ondblclick="MoveEleTo(this, 'id_{{ field.name }}_from')">{{ obj }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    {% else %}
                        {{ field }}
                    {% endif %}
                </div>
            </div>
        {% endfor %}
        <input type="submit" value="Save" class="pull-right btn btn-info">
        </form>
    </div>
{% endblock %}

{% block js %}
    <script type="text/javascript" src="/static/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/static/js/nb-list.js"></script>


    <script>
        $(function () {
            $.initMenu('#menu_asset');

        });
    </script>
{% endblock %}